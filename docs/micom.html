

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>micom package &mdash; micom 0.9.0+2.gf897403.dirty documentation</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="micom.data package" href="micom.data.html" />
    <link rel="prev" title="Workflows" href="workflows.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html">
          

          
            
            <img src="_static/micom.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.9
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="logic.html">Methods used by micom</a></li>
<li class="toctree-l1"><a class="reference internal" href="installing.html">Installing micom</a></li>
<li class="toctree-l1"><a class="reference internal" href="installing.html#Solvers">Solvers</a></li>
<li class="toctree-l1"><a class="reference internal" href="community.html">Building communities</a></li>
<li class="toctree-l1"><a class="reference internal" href="growth_fluxes.html">Growth rates and fluxes</a></li>
<li class="toctree-l1"><a class="reference internal" href="media.html">Growth media</a></li>
<li class="toctree-l1"><a class="reference internal" href="taxa_knockouts.html">Knockouts</a></li>
<li class="toctree-l1"><a class="reference internal" href="elasticities.html">Intervention studies</a></li>
<li class="toctree-l1"><a class="reference internal" href="workflows.html">Analyzing many samples in parallel</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#subpackages">Subpackages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="micom.data.html">micom.data package</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-micom.algorithms">micom.algorithms module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-micom.community">micom.community module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-micom.duality">micom.duality module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-micom.elasticity">micom.elasticity module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-micom.logger">micom.logger module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-micom.media">micom.media module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-micom.optcom">micom.optcom module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-micom.problems">micom.problems module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-micom.solution">micom.solution module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-micom.util">micom.util module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-micom.workflows">micom.workflows module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-micom">Module contents</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">micom</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>micom package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/micom.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}
</style>
<div class="section" id="micom-package">
<h1>micom package<a class="headerlink" href="#micom-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="micom.data.html">micom.data package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="micom.data.html#module-micom.data">Module contents</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-micom.algorithms">
<span id="micom-algorithms-module"></span><h2>micom.algorithms module<a class="headerlink" href="#module-micom.algorithms" title="Permalink to this headline">¶</a></h2>
<p>Implements additional analysis algorithms for communities.</p>
<dl class="function">
<dt id="micom.algorithms.euclidean">
<code class="descclassname">micom.algorithms.</code><code class="descname">euclidean</code><span class="sig-paren">(</span><em>inclusion</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.algorithms.euclidean" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate euclidean distances for a community.</p>
</dd></dl>

<dl class="function">
<dt id="micom.algorithms.jaccard">
<code class="descclassname">micom.algorithms.</code><code class="descname">jaccard</code><span class="sig-paren">(</span><em>inclusion</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.algorithms.jaccard" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate jaccard distances for a community.</p>
</dd></dl>

<dl class="function">
<dt id="micom.algorithms.metabolic_dist">
<code class="descclassname">micom.algorithms.</code><code class="descname">metabolic_dist</code><span class="sig-paren">(</span><em>reactions</em>, <em>metric=&lt;function jaccard&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.algorithms.metabolic_dist" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the metabolic distances between all members.</p>
</dd></dl>

<dl class="function">
<dt id="micom.algorithms.reaction_matrix">
<code class="descclassname">micom.algorithms.</code><code class="descname">reaction_matrix</code><span class="sig-paren">(</span><em>files</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.algorithms.reaction_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a matrix of reactions x models.</p>
</dd></dl>

</div>
<div class="section" id="module-micom.community">
<span id="micom-community-module"></span><h2>micom.community module<a class="headerlink" href="#module-micom.community" title="Permalink to this headline">¶</a></h2>
<p>A class representing a microbial or tissue community.</p>
<dl class="class">
<dt id="micom.community.Community">
<em class="property">class </em><code class="descclassname">micom.community.</code><code class="descname">Community</code><span class="sig-paren">(</span><em>taxonomy</em>, <em>id=None</em>, <em>name=None</em>, <em>rel_threshold=1e-06</em>, <em>solver=None</em>, <em>progress=True</em>, <em>max_exchange=100</em>, <em>mass=1</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.community.Community" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">cobra.core.model.Model</span></code></p>
<p>A community of models.</p>
<p>This class represents a community of individual models. It was designed for
microbial communities but may also be used for multi-tissue or tissue-cell
mixture models as long as all individuals exist within a single enclosing
compartment.</p>
<dl class="attribute">
<dt id="micom.community.Community.abundances">
<code class="descname">abundances</code><a class="headerlink" href="#micom.community.Community.abundances" title="Permalink to this definition">¶</a></dt>
<dd><p><em>pandas.Series</em> – The normalized abundances.</p>
<p>Setting this attribute will also trigger the appropriate updates in
the exchange fluxes and the community objective.</p>
</dd></dl>

<dl class="method">
<dt id="micom.community.Community.cooperative_tradeoff">
<code class="descname">cooperative_tradeoff</code><span class="sig-paren">(</span><em>min_growth=0.0</em>, <em>fraction=1.0</em>, <em>fluxes=False</em>, <em>pfba=True</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.community.Community.cooperative_tradeoff" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the best tradeoff between community and individual growth.</p>
<p>Finds the set of growth rates which maintian a particular community
growth and spread up growth across all species as much as possible.
This is done by minimizing the L2 norm of the growth rates with a
minimal community growth.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>min_growth</strong> (<em>float</em><em> or </em><em>array-like</em><em>, </em><em>optional</em>) – The minimal growth rate required for each individual. May be a
single value or an array-like object with the same length as there
are individuals.</li>
<li><strong>fraction</strong> (<em>float</em><em> or </em><em>list of floats in</em><em> [</em><em>0</em><em>, </em><em>1</em><em>]</em>) – The minum percentage of the community growth rate that has to be
maintained. For instance 0.9 means maintain 90% of the maximal
community growth rate. Defaults to 100%.</li>
<li><strong>fluxes</strong> (<em>boolean</em><em>, </em><em>optional</em>) – Whether to return the fluxes as well.</li>
<li><strong>pfba</strong> (<em>boolean</em><em>, </em><em>optional</em>) – Whether to obtain fluxes by parsimonious FBA rather than
“classical” FBA. This is highly recommended.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The solution of the optimization. If fluxes==False will only
contain the objective value, community growth rate and individual
growth rates. If more than one fraction value is given will return
a pandas Series of solutions with the fractions as indices.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">micom.CommunitySolution or pd.Series of solutions</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="micom.community.Community.exchanges">
<code class="descname">exchanges</code><a class="headerlink" href="#micom.community.Community.exchanges" title="Permalink to this definition">¶</a></dt>
<dd><p><em>list</em> – Returns all exchange reactions in the model.</p>
<p>Uses several heuristics based on the reaction name and compartments
to exclude reactions that are <em>not</em> exchange reactions.</p>
</dd></dl>

<dl class="method">
<dt id="micom.community.Community.knockout_species">
<code class="descname">knockout_species</code><span class="sig-paren">(</span><em>species=None</em>, <em>fraction=1.0</em>, <em>method='change'</em>, <em>progress=True</em>, <em>diag=True</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.community.Community.knockout_species" title="Permalink to this definition">¶</a></dt>
<dd><p>Sequentially knowckout a list of species in the model.</p>
<p>This uses cooperative tradeoff as optimization criterion in order to
get unqiue solutions for individual growth rates. Requires a QP
solver to work.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>species</strong> (<em>str</em><em> or </em><em>list of strs</em>) – Names of species to be knocked out.</li>
<li><strong>fraction</strong> (<em>float in</em><em> [</em><em>0</em><em>, </em><em>1</em><em>]</em><em>, </em><em>optional</em>) – Percentage of the maximum community growth rate that has to be
maintained. Defaults to 100%.</li>
<li><strong>method</strong> (<em>str</em><em>, </em><em>optional</em>) – One of “raw”, “change” or “relative change” that dictates whether
to return the new growth rate (raw), the change in growth rate
new - old or the relative change ([new - old] / old).</li>
<li><strong>progress</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to show a progress bar. On by default.</li>
<li><strong>diag</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether the diagonal should contain values as well. If False will
be filled with NaNs.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A data frame with one row for each knockout and growth rates in the
columns. Here the row name indicates which species has been knocked
out and the columns contain the growth changes for all species in
that knockout.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">pandas.DataFrame</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="micom.community.Community.modification">
<code class="descname">modification</code><a class="headerlink" href="#micom.community.Community.modification" title="Permalink to this definition">¶</a></dt>
<dd><p><em>str</em> – Denotes modifications to the model currently applied.</p>
<p>Will be None if the community is unmodified.</p>
</dd></dl>

<dl class="method">
<dt id="micom.community.Community.optcom">
<code class="descname">optcom</code><span class="sig-paren">(</span><em>strategy='lagrangian'</em>, <em>min_growth=0.0</em>, <em>fluxes=False</em>, <em>pfba=True</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.community.Community.optcom" title="Permalink to this definition">¶</a></dt>
<dd><p>Run OptCom for the community.</p>
<p>OptCom methods are a group of optimization procedures to find community
solutions that provide a tradeoff between the cooperative community
growth and the egoistic growth of each individual <a href="#id9"><span class="problematic" id="id1">[#c1]_</span></a>. <cite>micom</cite>
provides several strategies that can be used to find optimal solutions:</p>
<ul class="simple">
<li>“moma”: Minimization of metabolic adjustment. Simultaneously
optimizes the community objective (maximize) and the cooperativity
cost (minimize). This method finds an exact maximum but doubles the
number of required variables, thus being slow.</li>
<li>“lmoma”: The same as “moma” only with a linear
representation of the cooperativity cost (absolute value).</li>
<li>“original”: Solves the multi-objective problem described in <a href="#id10"><span class="problematic" id="id2">[#c1]_</span></a>.
Here, the community growth rate is maximized simultanously with all
individual growth rates. Note that there are usually many
Pareto-optimal solutions to this problem and the method will only
give one solution. This is also the slowest method.</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>community</strong> (<a class="reference internal" href="#micom.Community" title="micom.Community"><em>micom.Community</em></a>) – The community to optimize.</li>
<li><strong>strategy</strong> (<em>str</em>) – The strategy used to solve the OptCom formulation. Defaults to
“lagrangian” which gives a decent tradeoff between speed and
correctness.</li>
<li><strong>min_growth</strong> (<em>float</em><em> or </em><em>array-like</em>) – The minimal growth rate required for each individual. May be a
single value or an array-like object with the same length as there
are individuals.</li>
<li><strong>fluxes</strong> (<em>boolean</em>) – Whether to return the fluxes as well.</li>
<li><strong>pfba</strong> (<em>boolean</em>) – Whether to obtain fluxes by parsimonious FBA rather than
“classical” FBA.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The solution of the optimization. If fluxes==False will only
contain the objective value, community growth rate and individual
growth rates.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">micom.CommunitySolution</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<table class="docutils footnote" frame="void" id="c1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td>OptCom: a multi-level optimization framework for the metabolic
modeling and analysis of microbial communities.
Zomorrodi AR, Maranas CD. PLoS Comput Biol. 2012 Feb;8(2):e1002363.
doi: 10.1371/journal.pcbi.1002363, PMID: 22319433</td></tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="micom.community.Community.optimize">
<code class="descname">optimize</code><span class="sig-paren">(</span><em>fluxes=False</em>, <em>pfba=True</em>, <em>raise_error=False</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.community.Community.optimize" title="Permalink to this definition">¶</a></dt>
<dd><p>Optimize the model using flux balance analysis.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>slim</strong> (<em>boolean</em><em>, </em><em>optional</em>) – Whether to return a slim solution which does not contain fluxes,
just growth rates.</li>
<li><strong>raise_error</strong> (<em>boolean</em><em>, </em><em>optional</em>) – Should an error be raised if the solution is not optimal. Defaults
to False which will either return a solution with a non-optimal
status or None if optimization fails.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The solution after optimization or None if there is no optimum.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">micom.CommunitySolution</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="micom.community.Community.optimize_all">
<code class="descname">optimize_all</code><span class="sig-paren">(</span><em>fluxes=False</em>, <em>progress=False</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.community.Community.optimize_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Return solutions for individually optimizing each model.</p>
<p class="rubric">Notes</p>
<p>This might well mean that growth rates for all other individuals are
low since the individual may use up all available resources. As a
consequence the reported growth rates may usually never be obtained
all at once.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>fluxes</strong> (<em>boolean</em><em>, </em><em>optional</em>) – Whether to return all fluxes. Defaults to just returning the
maximal growth rate.</li>
<li><strong>progress</strong> (<em>boolean</em><em>, </em><em>optional</em>) – Whether to show a progress bar.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The maximal growth rate for each species.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">pandas.Series</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="micom.community.Community.optimize_single">
<code class="descname">optimize_single</code><span class="sig-paren">(</span><em>id</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.community.Community.optimize_single" title="Permalink to this definition">¶</a></dt>
<dd><p>Optimize growth rate for one individual.</p>
<p><cite>optimize_single</cite> will calculate the maximal growth rate for one
individual member of the community.</p>
<p class="rubric">Notes</p>
<p>This might well mean that growth rates for all other individuals are
low since the individual may use up all available resources.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>id</strong> (<em>str</em>) – The ID of the individual to be optimized.</li>
<li><strong>fluxes</strong> (<em>boolean</em><em>, </em><em>optional</em>) – Whether to return all fluxes. Defaults to just returning the
maximal growth rate.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The maximal growth rate for the given species.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">float</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="micom.community.Community.set_abundance">
<code class="descname">set_abundance</code><span class="sig-paren">(</span><em>value</em>, <em>normalize=True</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.community.Community.set_abundance" title="Permalink to this definition">¶</a></dt>
<dd><p>Change abundances for one or more taxa.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>value</strong> (<em>array-like object</em>) – The new abundances. Must contain one value for each taxon. Can
be a named object like a pandas Series.</li>
<li><strong>normalize</strong> (<em>boolean</em><em>, </em><em>optional</em>) – Whether to normalize the abundances to a total of 1.0. Many things
in micom asssume that this is always the case. Only change this
if you know what you are doing :O</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="micom.community.Community.taxonomy">
<code class="descname">taxonomy</code><a class="headerlink" href="#micom.community.Community.taxonomy" title="Permalink to this definition">¶</a></dt>
<dd><p><em>pandas.DataFrame</em> – The taxonomy used within the model.</p>
<p>This attribute only returns a copy.</p>
</dd></dl>

<dl class="method">
<dt id="micom.community.Community.to_pickle">
<code class="descname">to_pickle</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.community.Community.to_pickle" title="Permalink to this definition">¶</a></dt>
<dd><p>Save a community in serialized form.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>filename</strong> (<em>str</em>) – Where to save the pickled community.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">Nothing</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="micom.community.load_pickle">
<code class="descclassname">micom.community.</code><code class="descname">load_pickle</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.community.load_pickle" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a community model from a pickled version.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>filename</strong> (<em>str</em>) – The file the community is stored in.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The loaded community model.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#micom.Community" title="micom.Community">micom.Community</a></td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-micom.duality">
<span id="micom-duality-module"></span><h2>micom.duality module<a class="headerlink" href="#module-micom.duality" title="Permalink to this headline">¶</a></h2>
<p>Implements a fast dual formulation.</p>
<dl class="function">
<dt id="micom.duality.fast_dual">
<code class="descclassname">micom.duality.</code><code class="descname">fast_dual</code><span class="sig-paren">(</span><em>model</em>, <em>prefix='dual_'</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.duality.fast_dual" title="Permalink to this definition">¶</a></dt>
<dd><p>Add dual formulation to the problem.</p>
<p>A mathematical optimization problem can be viewed as a primal and a dual
problem. If the primal problem is a minimization problem the dual is a
maximization problem, and the optimal value of the dual is a lower bound of
the optimal value of the primal. For linear problems, strong duality holds,
which means that the optimal values of the primal and dual are equal
(duality gap = 0). This functions takes an optlang Model representing a
primal linear problem
and returns a new Model representing the dual optimization problem. The
provided model must have a linear objective, linear constraints and only
continuous variables. Furthermore, the problem must be in standard form,
i.e. all variables should be non-negative. Both minimization and
maximization problems are allowed.</p>
<dl class="attribute">
<dt id="micom.duality.model">
<code class="descclassname">micom.duality.</code><code class="descname">model</code><a class="headerlink" href="#micom.duality.model" title="Permalink to this definition">¶</a></dt>
<dd><p><em>cobra.Model</em> – The model to be dualized.</p>
</dd></dl>

<dl class="attribute">
<dt id="micom.duality.prefix">
<code class="descclassname">micom.duality.</code><code class="descname">prefix</code><a class="headerlink" href="#micom.duality.prefix" title="Permalink to this definition">¶</a></dt>
<dd><p><em>str</em> – The string that will be prepended to all variable and constraint names
in the returned dual problem.</p>
</dd></dl>

<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">The coefficients for the new dual objective.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">dict</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-micom.elasticity">
<span id="micom-elasticity-module"></span><h2>micom.elasticity module<a class="headerlink" href="#module-micom.elasticity" title="Permalink to this headline">¶</a></h2>
<p>Calculate elasticity coefficients.</p>
<p>Functions to calculate elasticity coefficients for various community
quantities.</p>
<dl class="function">
<dt id="micom.elasticity.elasticities_by_abundance">
<code class="descclassname">micom.elasticity.</code><code class="descname">elasticities_by_abundance</code><span class="sig-paren">(</span><em>com</em>, <em>reactions</em>, <em>fraction</em>, <em>growth_rate</em>, <em>progress</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.elasticity.elasticities_by_abundance" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the elasticity coefficients for a set of variables.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>com</strong> (<a class="reference internal" href="#micom.Community" title="micom.Community"><em>micom.Community</em></a>) – The community for wrhich to calculate elasticities.</li>
<li><strong>variables</strong> (<em>list of optlang.Variable</em>) – The variables for which to calculate the elasticities. All of these
must have non-zero primal vaues in the previous solution.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The long/tidy version of the elasticities. Contains columns variable,
effector, and elasticity.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">pandas.Dataframe</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="micom.elasticity.elasticities_by_medium">
<code class="descclassname">micom.elasticity.</code><code class="descname">elasticities_by_medium</code><span class="sig-paren">(</span><em>com</em>, <em>reactions</em>, <em>fraction</em>, <em>growth_rate</em>, <em>progress</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.elasticity.elasticities_by_medium" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the elasticity coefficients for a set of variables.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>com</strong> (<a class="reference internal" href="#micom.Community" title="micom.Community"><em>micom.Community</em></a>) – The community for wrhich to calculate elasticities.</li>
<li><strong>variables</strong> (<em>list of optlang.Variable</em>) – The variables for which to calculate the elasticities. All of these
must have non-zero primal vaues in the previous solution.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The long/tidy version of the elasticities. Contains columns variable,
effector, and elasticity.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">pandas.Dataframe</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="micom.elasticity.exchange_elasticities">
<code class="descclassname">micom.elasticity.</code><code class="descname">exchange_elasticities</code><span class="sig-paren">(</span><em>com</em>, <em>fraction=1.0</em>, <em>progress=True</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.elasticity.exchange_elasticities" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate elasticities for exchange reactions.</p>
<p>Calculates elasticity coefficients using the exchange reactions as
response and exchange bounds (diet) and taxa abundances as
effectors/parameters. Will use an arbitrary flux distribution as base.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>com</strong> (<a class="reference internal" href="#micom.Community" title="micom.Community"><em>micom.Community</em></a>) – The community for wrhich to calculate elasticities.</li>
<li><strong>fraction</strong> (<em>double</em>) – The tradeoff to use for the cooperative tradeoff method. Fraction of
maximal community growth to enforce.</li>
<li><strong>progress</strong> (<em>boolean</em>) – Whether to shwo progress bars. Will show two, one for the diet
optimizations and another one for the taxa abundances.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A data frame with the following columns:
“reaction” - the exchange reaction (response),
“effector” - the parameter that was changed,
“direction” - whether the flux runs in the forward od reverse direction,
“elasticity” - the elasticity coefficient,
“type” - the type of effector either “exchange” for diet or “abundance”
for taxa abundances.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">pandas.DataFrame</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-micom.logger">
<span id="micom-logger-module"></span><h2>micom.logger module<a class="headerlink" href="#module-micom.logger" title="Permalink to this headline">¶</a></h2>
<p>configures the logger for mico.</p>
<dl class="function">
<dt id="micom.logger.file_logger">
<code class="descclassname">micom.logger.</code><code class="descname">file_logger</code><span class="sig-paren">(</span><em>filepath</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.logger.file_logger" title="Permalink to this definition">¶</a></dt>
<dd><p>Log micom messages to file.</p>
</dd></dl>

</div>
<div class="section" id="module-micom.media">
<span id="micom-media-module"></span><h2>micom.media module<a class="headerlink" href="#module-micom.media" title="Permalink to this headline">¶</a></h2>
<p>Manages functions for growth media analysis and manipulation.</p>
<dl class="function">
<dt id="micom.media.add_linear_obj">
<code class="descclassname">micom.media.</code><code class="descname">add_linear_obj</code><span class="sig-paren">(</span><em>community</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.media.add_linear_obj" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a linear version of a minimal medium to the community.</p>
<p>Changes the optimization objective to finding the growth medium requiring
the smallest total import flux:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">minimize</span> <span class="nb">sum</span> <span class="o">|</span><span class="n">r_i</span><span class="o">|</span> <span class="k">for</span> <span class="n">r_i</span> <span class="ow">in</span> <span class="n">import_reactions</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>community</strong> (<a class="reference internal" href="#micom.Community" title="micom.Community"><em>micom.Community</em></a>) – The community to modify.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="micom.media.add_mip_obj">
<code class="descclassname">micom.media.</code><code class="descname">add_mip_obj</code><span class="sig-paren">(</span><em>community</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.media.add_mip_obj" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a mixed-integer version of a minimal medium to the community.</p>
<p>Changes the optimization objective to finding the medium with the least
components:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">minimize</span> <span class="n">size</span><span class="p">(</span><span class="n">R</span><span class="p">)</span> <span class="n">where</span> <span class="n">R</span> <span class="n">part</span> <span class="n">of</span> <span class="n">import_reactions</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>community</strong> (<a class="reference internal" href="#micom.Community" title="micom.Community"><em>micom.Community</em></a>) – The community to modify.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="data">
<dt id="micom.media.default_excludes">
<code class="descclassname">micom.media.</code><code class="descname">default_excludes</code><em class="property"> = ['biosynthesis', 'transcription', 'replication', 'sink', 'demand', 'DM_', 'SN_', 'SK_']</em><a class="headerlink" href="#micom.media.default_excludes" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of sub-strings in reaction IDs that usually indicate that
the reaction is <em>not</em> an exchange reaction.</p>
</dd></dl>

<dl class="function">
<dt id="micom.media.minimal_medium">
<code class="descclassname">micom.media.</code><code class="descname">minimal_medium</code><span class="sig-paren">(</span><em>community</em>, <em>community_growth</em>, <em>min_growth=0.0</em>, <em>exports=False</em>, <em>minimize_components=False</em>, <em>open_exchanges=False</em>, <em>solution=False</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.media.minimal_medium" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the minimal growth medium for the community.</p>
<p>Finds the minimal growth medium for the community which allows for
community as well as individual growth. Here, a minimal medium can either
be the medium requiring the smallest total import flux or the medium
requiring the least components (ergo ingredients).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>community</strong> (<a class="reference internal" href="#micom.Community" title="micom.Community"><em>micom.Community</em></a>) – The community to modify.</li>
<li><strong>community_growth</strong> (<em>positive float</em>) – The minimum community-wide growth rate.</li>
<li><strong>min_growth</strong> (<em>positive float</em><em> or </em><em>array-like object.</em>) – The minimum growth rate for each individual in the community. Either
a single value applied to all individuals or one value for each.</li>
<li><strong>exports</strong> (<em>boolean</em>) – Whether to include export fluxes in the returned medium. Defaults to
False which will only return import fluxes.</li>
<li><strong>minimize_components</strong> (<em>boolean</em>) – Whether to minimize the number of components instead of the total
import flux. Might be more intuitive if set to True but may also be
slow to calculate for large communities.</li>
<li><strong>open_exchanges</strong> (<em>boolean</em><em> or </em><em>number</em>) – Whether to ignore currently set bounds and make all exchange reactions
in the model possible. If set to a number all exchange reactions will
be opened with (-number, number) as bounds.</li>
<li><strong>solution</strong> (<em>boolean</em>) – Whether to also return the entire solution and all fluxes for the
minimal medium.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A series {rid: flux} giving the import flux for each required import
reaction. If <cite>solution</cite> is True retuns a dictionary
{“medium”: panas.Series, “solution”: micom.CommunitySolution}.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">pandas.Series or dict</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-micom.optcom">
<span id="micom-optcom-module"></span><h2>micom.optcom module<a class="headerlink" href="#module-micom.optcom" title="Permalink to this headline">¶</a></h2>
<p>Implements optimization and model problems.</p>
<dl class="function">
<dt id="micom.optcom.add_dualized_optcom">
<code class="descclassname">micom.optcom.</code><code class="descname">add_dualized_optcom</code><span class="sig-paren">(</span><em>community</em>, <em>min_growth</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.optcom.add_dualized_optcom" title="Permalink to this definition">¶</a></dt>
<dd><p>Add dual Optcom variables and constraints to a community.</p>
<p>Uses the original formulation of OptCom and solves the following
multi-objective problem:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">maximize</span> <span class="n">community_growth</span>
<span class="n">s</span><span class="o">.</span><span class="n">t</span><span class="o">.</span> <span class="n">maximize</span> <span class="n">growth_rate_i</span> <span class="k">for</span> <span class="nb">all</span> <span class="n">i</span>
     <span class="n">s</span><span class="o">.</span><span class="n">t</span><span class="o">.</span> <span class="n">Sv_i</span> <span class="o">=</span> <span class="mi">0</span>
          <span class="n">lb_i</span> <span class="o">&gt;=</span> <span class="n">v_i</span> <span class="o">&gt;=</span> <span class="n">ub_i</span>
</pre></div>
</div>
<p class="rubric">Notes</p>
<p>This method will only find one arbitrary solution from the Pareto front.
There may exist several other optimal solutions.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>community</strong> (<a class="reference internal" href="#micom.Community" title="micom.Community"><em>micom.Community</em></a>) – The community to modify.</li>
<li><strong>min_growth</strong> (<em>positive float</em><em> or </em><em>array-like object.</em>) – The minimum growth rate for each individual in the community. Either
a single value applied to all individuals or one value for each.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="micom.optcom.add_moma_optcom">
<code class="descclassname">micom.optcom.</code><code class="descname">add_moma_optcom</code><span class="sig-paren">(</span><em>community</em>, <em>min_growth</em>, <em>linear=False</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.optcom.add_moma_optcom" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a dualized MOMA version of OptCom.</p>
<p>Solves a MOMA (minimization of metabolic adjustment) formulation of OptCom
given by:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">minimize</span> <span class="n">cooperativity_cost</span>
<span class="n">s</span><span class="o">.</span><span class="n">t</span><span class="o">.</span> <span class="n">maximize</span> <span class="n">community_objective</span>
     <span class="n">s</span><span class="o">.</span><span class="n">t</span><span class="o">.</span> <span class="n">Sv</span> <span class="o">=</span> <span class="mi">0</span>
          <span class="n">lb</span> <span class="o">&gt;=</span> <span class="n">v</span> <span class="o">&gt;=</span> <span class="n">ub</span>
<span class="n">where</span> <span class="n">community_cost</span> <span class="o">=</span> <span class="nb">sum</span> <span class="p">(</span><span class="n">growth_rate</span> <span class="o">-</span> <span class="n">max_growth</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span>
      <span class="k">if</span> <span class="n">linear</span><span class="o">=</span><span class="kc">False</span> <span class="ow">or</span>
      <span class="n">community_cost</span> <span class="o">=</span> <span class="nb">sum</span> <span class="o">|</span><span class="n">growth_rate</span> <span class="o">-</span> <span class="n">max_growth</span><span class="o">|</span>
      <span class="k">if</span> <span class="n">linear</span><span class="o">=</span><span class="kc">True</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>community</strong> (<a class="reference internal" href="#micom.Community" title="micom.Community"><em>micom.Community</em></a>) – The community to modify.</li>
<li><strong>min_growth</strong> (<em>positive float</em><em> or </em><em>array-like object.</em>) – The minimum growth rate for each individual in the community. Either
a single value applied to all individuals or one value for each.</li>
<li><strong>linear</strong> (<em>boolean</em>) – Whether to use a non-linear (sum of squares) or linear version of the
cooperativity cost. If set to False requires a QP-capable solver.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="micom.optcom.optcom">
<code class="descclassname">micom.optcom.</code><code class="descname">optcom</code><span class="sig-paren">(</span><em>community</em>, <em>strategy</em>, <em>min_growth</em>, <em>fluxes</em>, <em>pfba</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.optcom.optcom" title="Permalink to this definition">¶</a></dt>
<dd><p>Run OptCom for the community.</p>
<p>OptCom methods are a group of optimization procedures to find community
solutions that provide a tradeoff between the cooperative community
growth and the egoistic growth of each individual <a class="footnote-reference" href="#p1" id="id3">[2]</a>. <cite>micom</cite>
provides several strategies that can be used to find optimal solutions:</p>
<ul class="simple">
<li>“moma”: Minimization of metabolic adjustment. Simultaneously
optimizes the community objective (maximize) and the cooperativity
cost (minimize). This method finds an exact maximum but doubles the
number of required variables, thus being slow.</li>
<li>“lmoma”: The same as “moma” only with a linear
representation of the cooperativity cost (absolute value).</li>
<li>“original”: Solves the multi-objective problem described in <a class="footnote-reference" href="#p1" id="id4">[2]</a>.
Here, the community growth rate is maximized simultanously with all
individual growth rates. Note that there are usually many
Pareto-optimal solutions to this problem and the method will only
give one solution. This is also the slowest method.</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>community</strong> (<a class="reference internal" href="#micom.Community" title="micom.Community"><em>micom.Community</em></a>) – The community to optimize.</li>
<li><strong>strategy</strong> (<em>str</em>) – The strategy used to solve the OptCom formulation. Defaults to
“lagrangian” which gives a decent tradeoff between speed and
correctness.</li>
<li><strong>min_growth</strong> (<em>float</em><em> or </em><em>array-like</em>) – The minimal growth rate required for each individual. May be a
single value or an array-like object with the same length as there
are individuals.</li>
<li><strong>fluxes</strong> (<em>boolean</em>) – Whether to return the fluxes as well.</li>
<li><strong>pfba</strong> (<em>boolean</em>) – Whether to obtain fluxes by parsimonious FBA rather than
“classical” FBA.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The solution of the optimization. If fluxes==False will only contain
the objective value, community growth rate and individual growth rates.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">micom.CommunitySolution</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<table class="docutils footnote" frame="void" id="p1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[2]</td><td><em>(<a class="fn-backref" href="#id3">1</a>, <a class="fn-backref" href="#id4">2</a>)</em> OptCom: a multi-level optimization framework for the metabolic
modeling and analysis of microbial communities.
Zomorrodi AR, Maranas CD. PLoS Comput Biol. 2012 Feb;8(2):e1002363.
doi: 10.1371/journal.pcbi.1002363, PMID: 22319433</td></tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-micom.problems">
<span id="micom-problems-module"></span><h2>micom.problems module<a class="headerlink" href="#module-micom.problems" title="Permalink to this headline">¶</a></h2>
<p>Implements tradeoff optimization between community and egoistic growth.</p>
<dl class="function">
<dt id="micom.problems.cooperative_tradeoff">
<code class="descclassname">micom.problems.</code><code class="descname">cooperative_tradeoff</code><span class="sig-paren">(</span><em>community</em>, <em>min_growth</em>, <em>fraction</em>, <em>fluxes</em>, <em>pfba</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.problems.cooperative_tradeoff" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the best tradeoff between community and individual growth.</p>
</dd></dl>

<dl class="function">
<dt id="micom.problems.knockout_species">
<code class="descclassname">micom.problems.</code><code class="descname">knockout_species</code><span class="sig-paren">(</span><em>community</em>, <em>species</em>, <em>fraction</em>, <em>method</em>, <em>progress</em>, <em>diag=True</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.problems.knockout_species" title="Permalink to this definition">¶</a></dt>
<dd><p>Knockout a species from the community.</p>
</dd></dl>

<dl class="function">
<dt id="micom.problems.regularize_l2_norm">
<code class="descclassname">micom.problems.</code><code class="descname">regularize_l2_norm</code><span class="sig-paren">(</span><em>community</em>, <em>min_growth</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.problems.regularize_l2_norm" title="Permalink to this definition">¶</a></dt>
<dd><p>Add an objective to find the most “egoistic” solution.</p>
<p>This adds an optimization objective finding a solution that maintains a
(sub-)optimal community growth rate but is the closest solution to the
community members individual maximal growth rates. So it basically finds
the best possible tradeoff between maximizing community growth and
individual (egoistic) growth. Here the objective is given as the sum of
squared differences between the individuals current and maximal growth
rate. In the linear case squares are substituted by absolute values
(Manhattan distance).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>community</strong> (<a class="reference internal" href="#micom.Community" title="micom.Community"><em>micom.Community</em></a>) – The community to modify.</li>
<li><strong>min_growth</strong> (<em>positive float</em>) – The minimal community growth rate that has to be mantained.</li>
<li><strong>linear</strong> (<em>boolean</em>) – Whether to use a non-linear (sum of squares) or linear version of the
cooperativity cost. If set to False requires a QP-capable solver.</li>
<li><strong>max_gcs</strong> (<em>None</em><em> or </em><em>dict</em>) – The precomputed maximum individual growth rates.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-micom.solution">
<span id="micom-solution-module"></span><h2>micom.solution module<a class="headerlink" href="#module-micom.solution" title="Permalink to this headline">¶</a></h2>
<p>A community solution object.</p>
<dl class="class">
<dt id="micom.solution.CommunitySolution">
<em class="property">class </em><code class="descclassname">micom.solution.</code><code class="descname">CommunitySolution</code><span class="sig-paren">(</span><em>community</em>, <em>slim=False</em>, <em>reactions=None</em>, <em>metabolites=None</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.solution.CommunitySolution" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">cobra.core.solution.Solution</span></code></p>
<p>An FBA solution for an entire community.</p>
<dl class="attribute">
<dt id="micom.solution.CommunitySolution.objective_value">
<code class="descname">objective_value</code><a class="headerlink" href="#micom.solution.CommunitySolution.objective_value" title="Permalink to this definition">¶</a></dt>
<dd><p><em>float</em> – The (optimal) value for the objective function.</p>
</dd></dl>

<dl class="attribute">
<dt id="micom.solution.CommunitySolution.members">
<code class="descname">members</code><a class="headerlink" href="#micom.solution.CommunitySolution.members" title="Permalink to this definition">¶</a></dt>
<dd><p><em>pandas.Series</em> – Contains basic info about the individual compartments/members of the
community such as id, abundance and growth rates. Will also include
one row for the external medium (without abundance and growth rate).</p>
</dd></dl>

<dl class="attribute">
<dt id="micom.solution.CommunitySolution.growth_rate">
<code class="descname">growth_rate</code><a class="headerlink" href="#micom.solution.CommunitySolution.growth_rate" title="Permalink to this definition">¶</a></dt>
<dd><p><em>float</em> – The overall growth rate for the community normalized to 1 gDW.</p>
</dd></dl>

<dl class="attribute">
<dt id="micom.solution.CommunitySolution.status">
<code class="descname">status</code><a class="headerlink" href="#micom.solution.CommunitySolution.status" title="Permalink to this definition">¶</a></dt>
<dd><p><em>str</em> – The solver status related to the solution.</p>
</dd></dl>

<dl class="attribute">
<dt id="micom.solution.CommunitySolution.strategy">
<code class="descname">strategy</code><a class="headerlink" href="#micom.solution.CommunitySolution.strategy" title="Permalink to this definition">¶</a></dt>
<dd><p><em>str</em> – The optimization strategy used to obtain the solution (may be empty).</p>
</dd></dl>

<dl class="attribute">
<dt id="micom.solution.CommunitySolution.fluxes">
<code class="descname">fluxes</code><a class="headerlink" href="#micom.solution.CommunitySolution.fluxes" title="Permalink to this definition">¶</a></dt>
<dd><p><em>pandas.DataFrame</em> – Contains the reaction fluxes (primal values of variables) stratified
by compartment. Columns denote individual fluxes and rows denote
compartments: one for every species plus one for the external medium.
Fluxes will be NA if the reaction does not exist in the organism.</p>
</dd></dl>

<dl class="attribute">
<dt id="micom.solution.CommunitySolution.reduced_costs">
<code class="descname">reduced_costs</code><a class="headerlink" href="#micom.solution.CommunitySolution.reduced_costs" title="Permalink to this definition">¶</a></dt>
<dd><p><em>pandas.Series</em> – Contains reaction reduced costs (dual values of variables) stratified
by species. Columns denote individual fluxes and rows denote species.
Reduced costs will be NA if the reaction does not exist in the
organism.</p>
</dd></dl>

<dl class="attribute">
<dt id="micom.solution.CommunitySolution.shadow_prices">
<code class="descname">shadow_prices</code><a class="headerlink" href="#micom.solution.CommunitySolution.shadow_prices" title="Permalink to this definition">¶</a></dt>
<dd><p><em>pandas.Series</em> – Contains metabolite shadow prices (dual values of constraints)
stratified by species. Columns denote individual metabolites and rows
denote species. Shadow prices will be NA if the metabolite does not
exist in the organism.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="micom.solution.add_pfba_objective">
<code class="descclassname">micom.solution.</code><code class="descname">add_pfba_objective</code><span class="sig-paren">(</span><em>community</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.solution.add_pfba_objective" title="Permalink to this definition">¶</a></dt>
<dd><p>Add pFBA objective.</p>
<p>Add objective to minimize the summed flux of all reactions to the
current objective. This one will work with any objective (even non-linear
ones).</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-func docutils literal notranslate"><span class="pre">pfba()</span></code></p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>community</strong> (<a class="reference internal" href="#micom.Community" title="micom.Community"><em>micom.Community</em></a>) – The community to add the objective to.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="micom.solution.crossover">
<code class="descclassname">micom.solution.</code><code class="descname">crossover</code><span class="sig-paren">(</span><em>community</em>, <em>sol</em>, <em>fluxes=False</em>, <em>pfba=False</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.solution.crossover" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the crossover solution.</p>
</dd></dl>

<dl class="data">
<dt id="micom.solution.good">
<code class="descclassname">micom.solution.</code><code class="descname">good</code><em class="property"> = ['optimal', 'numeric', 'feasible', 'suboptimal', 'iteration_limit']</em><a class="headerlink" href="#micom.solution.good" title="Permalink to this definition">¶</a></dt>
<dd><p>Solver states that permit returning the solution.</p>
</dd></dl>

<dl class="function">
<dt id="micom.solution.optimize_with_fraction">
<code class="descclassname">micom.solution.</code><code class="descname">optimize_with_fraction</code><span class="sig-paren">(</span><em>com</em>, <em>fraction</em>, <em>growth_rate=None</em>, <em>fluxes=False</em>, <em>pfba=False</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.solution.optimize_with_fraction" title="Permalink to this definition">¶</a></dt>
<dd><p>Optimize with a constrained community growth rate.</p>
</dd></dl>

<dl class="function">
<dt id="micom.solution.optimize_with_retry">
<code class="descclassname">micom.solution.</code><code class="descname">optimize_with_retry</code><span class="sig-paren">(</span><em>com</em>, <em>message='could not get optimum.'</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.solution.optimize_with_retry" title="Permalink to this definition">¶</a></dt>
<dd><p>Try to reset the solver.</p>
</dd></dl>

<dl class="function">
<dt id="micom.solution.reset_solver">
<code class="descclassname">micom.solution.</code><code class="descname">reset_solver</code><span class="sig-paren">(</span><em>community</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.solution.reset_solver" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset the solver.</p>
</dd></dl>

<dl class="function">
<dt id="micom.solution.solve">
<code class="descclassname">micom.solution.</code><code class="descname">solve</code><span class="sig-paren">(</span><em>community</em>, <em>fluxes=True</em>, <em>pfba=True</em>, <em>raise_error=False</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.solution.solve" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all fluxes stratified by species.</p>
</dd></dl>

</div>
<div class="section" id="module-micom.util">
<span id="micom-util-module"></span><h2>micom.util module<a class="headerlink" href="#module-micom.util" title="Permalink to this headline">¶</a></h2>
<p>Holds utility functions for other modules.</p>
<dl class="function">
<dt id="micom.util.add_var_from_expression">
<code class="descclassname">micom.util.</code><code class="descname">add_var_from_expression</code><span class="sig-paren">(</span><em>model</em>, <em>name</em>, <em>expr</em>, <em>lb=None</em>, <em>ub=None</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.util.add_var_from_expression" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a variable to a model equaling an expression.</p>
</dd></dl>

<dl class="function">
<dt id="micom.util.adjust_solver_config">
<code class="descclassname">micom.util.</code><code class="descname">adjust_solver_config</code><span class="sig-paren">(</span><em>solver</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.util.adjust_solver_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Adjust the optlang solver configuration for larger problems.</p>
</dd></dl>

<dl class="function">
<dt id="micom.util.check_modification">
<code class="descclassname">micom.util.</code><code class="descname">check_modification</code><span class="sig-paren">(</span><em>community</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.util.check_modification" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether a community already carries a modification.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>community</strong> (<a class="reference internal" href="#micom.Community" title="micom.Community"><em>micom.Community</em></a>) – The community class to check.</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code> – If the community already carries a modification and adding another
would not be safe.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="micom.util.download_model">
<code class="descclassname">micom.util.</code><code class="descname">download_model</code><span class="sig-paren">(</span><em>url</em>, <em>folder='.'</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.util.download_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Download a model.</p>
</dd></dl>

<dl class="function">
<dt id="micom.util.fluxes_from_primals">
<code class="descclassname">micom.util.</code><code class="descname">fluxes_from_primals</code><span class="sig-paren">(</span><em>model</em>, <em>info</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.util.fluxes_from_primals" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract a list of fluxes from the model primals.</p>
</dd></dl>

<dl class="function">
<dt id="micom.util.join_models">
<code class="descclassname">micom.util.</code><code class="descname">join_models</code><span class="sig-paren">(</span><em>model_files</em>, <em>id=None</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.util.join_models" title="Permalink to this definition">¶</a></dt>
<dd><p>Join several models into one.</p>
<p>This requires all the models to use the same ID system.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>model_files</strong> (<em>list of strings</em>) – The files to be joined.</li>
<li><strong>id</strong> (<em>str</em>) – The new ID for the model. Will be the ID of the first model if None.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The joined cobra Model.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">cobra.Model</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="micom.util.load_model">
<code class="descclassname">micom.util.</code><code class="descname">load_model</code><span class="sig-paren">(</span><em>filepath</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.util.load_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a cobra model from several file types.</p>
</dd></dl>

<dl class="function">
<dt id="micom.util.reset_min_community_growth">
<code class="descclassname">micom.util.</code><code class="descname">reset_min_community_growth</code><span class="sig-paren">(</span><em>com</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.util.reset_min_community_growth" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset the lower bound for the community growth.</p>
</dd></dl>

<dl class="function">
<dt id="micom.util.serialize_models">
<code class="descclassname">micom.util.</code><code class="descname">serialize_models</code><span class="sig-paren">(</span><em>files</em>, <em>dir='.'</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.util.serialize_models" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert several models to Python pickles.</p>
</dd></dl>

</div>
<div class="section" id="module-micom.workflows">
<span id="micom-workflows-module"></span><h2>micom.workflows module<a class="headerlink" href="#module-micom.workflows" title="Permalink to this headline">¶</a></h2>
<p>Makes it easier to run analyses on several samples in parallel.</p>
<dl class="function">
<dt id="micom.workflows.workflow">
<code class="descclassname">micom.workflows.</code><code class="descname">workflow</code><span class="sig-paren">(</span><em>func</em>, <em>args</em>, <em>n_jobs=4</em>, <em>unit='sample(s)'</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.workflows.workflow" title="Permalink to this definition">¶</a></dt>
<dd><p>Run analyses for several samples in parallel.</p>
<p>This will analyze several samples in parallel. Includes a workaround for
optlang memory leak.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>func</strong> (<em>function</em>) – A function that takes a single argument (can be any object) and
that performs your analysis for a single sample.</li>
<li><strong>args</strong> (<em>array-like object</em>) – An array-like object (list, tuple, numpy array, pandas Series, etc.)
that contains the arguments for each sample.</li>
<li><strong>n_jobs</strong> (<em>positive int</em>) – How many samples to analyze in parallel at once.</li>
<li><strong>unit</strong> (<em>str</em>) – The unit used for the progress bar.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-micom">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-micom" title="Permalink to this headline">¶</a></h2>
<p>Simple init file for mico.</p>
<dl class="class">
<dt id="micom.Community">
<em class="property">class </em><code class="descclassname">micom.</code><code class="descname">Community</code><span class="sig-paren">(</span><em>taxonomy</em>, <em>id=None</em>, <em>name=None</em>, <em>rel_threshold=1e-06</em>, <em>solver=None</em>, <em>progress=True</em>, <em>max_exchange=100</em>, <em>mass=1</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.Community" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">cobra.core.model.Model</span></code></p>
<p>A community of models.</p>
<p>This class represents a community of individual models. It was designed for
microbial communities but may also be used for multi-tissue or tissue-cell
mixture models as long as all individuals exist within a single enclosing
compartment.</p>
<dl class="attribute">
<dt id="micom.Community.abundances">
<code class="descname">abundances</code><a class="headerlink" href="#micom.Community.abundances" title="Permalink to this definition">¶</a></dt>
<dd><p><em>pandas.Series</em> – The normalized abundances.</p>
<p>Setting this attribute will also trigger the appropriate updates in
the exchange fluxes and the community objective.</p>
</dd></dl>

<dl class="method">
<dt id="micom.Community.cooperative_tradeoff">
<code class="descname">cooperative_tradeoff</code><span class="sig-paren">(</span><em>min_growth=0.0</em>, <em>fraction=1.0</em>, <em>fluxes=False</em>, <em>pfba=True</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.Community.cooperative_tradeoff" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the best tradeoff between community and individual growth.</p>
<p>Finds the set of growth rates which maintian a particular community
growth and spread up growth across all species as much as possible.
This is done by minimizing the L2 norm of the growth rates with a
minimal community growth.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>min_growth</strong> (<em>float</em><em> or </em><em>array-like</em><em>, </em><em>optional</em>) – The minimal growth rate required for each individual. May be a
single value or an array-like object with the same length as there
are individuals.</li>
<li><strong>fraction</strong> (<em>float</em><em> or </em><em>list of floats in</em><em> [</em><em>0</em><em>, </em><em>1</em><em>]</em>) – The minum percentage of the community growth rate that has to be
maintained. For instance 0.9 means maintain 90% of the maximal
community growth rate. Defaults to 100%.</li>
<li><strong>fluxes</strong> (<em>boolean</em><em>, </em><em>optional</em>) – Whether to return the fluxes as well.</li>
<li><strong>pfba</strong> (<em>boolean</em><em>, </em><em>optional</em>) – Whether to obtain fluxes by parsimonious FBA rather than
“classical” FBA. This is highly recommended.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The solution of the optimization. If fluxes==False will only
contain the objective value, community growth rate and individual
growth rates. If more than one fraction value is given will return
a pandas Series of solutions with the fractions as indices.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">micom.CommunitySolution or pd.Series of solutions</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="micom.Community.exchanges">
<code class="descname">exchanges</code><a class="headerlink" href="#micom.Community.exchanges" title="Permalink to this definition">¶</a></dt>
<dd><p><em>list</em> – Returns all exchange reactions in the model.</p>
<p>Uses several heuristics based on the reaction name and compartments
to exclude reactions that are <em>not</em> exchange reactions.</p>
</dd></dl>

<dl class="method">
<dt id="micom.Community.knockout_species">
<code class="descname">knockout_species</code><span class="sig-paren">(</span><em>species=None</em>, <em>fraction=1.0</em>, <em>method='change'</em>, <em>progress=True</em>, <em>diag=True</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.Community.knockout_species" title="Permalink to this definition">¶</a></dt>
<dd><p>Sequentially knowckout a list of species in the model.</p>
<p>This uses cooperative tradeoff as optimization criterion in order to
get unqiue solutions for individual growth rates. Requires a QP
solver to work.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>species</strong> (<em>str</em><em> or </em><em>list of strs</em>) – Names of species to be knocked out.</li>
<li><strong>fraction</strong> (<em>float in</em><em> [</em><em>0</em><em>, </em><em>1</em><em>]</em><em>, </em><em>optional</em>) – Percentage of the maximum community growth rate that has to be
maintained. Defaults to 100%.</li>
<li><strong>method</strong> (<em>str</em><em>, </em><em>optional</em>) – One of “raw”, “change” or “relative change” that dictates whether
to return the new growth rate (raw), the change in growth rate
new - old or the relative change ([new - old] / old).</li>
<li><strong>progress</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to show a progress bar. On by default.</li>
<li><strong>diag</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether the diagonal should contain values as well. If False will
be filled with NaNs.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A data frame with one row for each knockout and growth rates in the
columns. Here the row name indicates which species has been knocked
out and the columns contain the growth changes for all species in
that knockout.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">pandas.DataFrame</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="micom.Community.modification">
<code class="descname">modification</code><a class="headerlink" href="#micom.Community.modification" title="Permalink to this definition">¶</a></dt>
<dd><p><em>str</em> – Denotes modifications to the model currently applied.</p>
<p>Will be None if the community is unmodified.</p>
</dd></dl>

<dl class="method">
<dt id="micom.Community.optcom">
<code class="descname">optcom</code><span class="sig-paren">(</span><em>strategy='lagrangian'</em>, <em>min_growth=0.0</em>, <em>fluxes=False</em>, <em>pfba=True</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.Community.optcom" title="Permalink to this definition">¶</a></dt>
<dd><p>Run OptCom for the community.</p>
<p>OptCom methods are a group of optimization procedures to find community
solutions that provide a tradeoff between the cooperative community
growth and the egoistic growth of each individual <a href="#id11"><span class="problematic" id="id5">[#c1]_</span></a>. <cite>micom</cite>
provides several strategies that can be used to find optimal solutions:</p>
<ul class="simple">
<li>“moma”: Minimization of metabolic adjustment. Simultaneously
optimizes the community objective (maximize) and the cooperativity
cost (minimize). This method finds an exact maximum but doubles the
number of required variables, thus being slow.</li>
<li>“lmoma”: The same as “moma” only with a linear
representation of the cooperativity cost (absolute value).</li>
<li>“original”: Solves the multi-objective problem described in <a href="#id12"><span class="problematic" id="id6">[#c1]_</span></a>.
Here, the community growth rate is maximized simultanously with all
individual growth rates. Note that there are usually many
Pareto-optimal solutions to this problem and the method will only
give one solution. This is also the slowest method.</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>community</strong> (<a class="reference internal" href="#micom.Community" title="micom.Community"><em>micom.Community</em></a>) – The community to optimize.</li>
<li><strong>strategy</strong> (<em>str</em>) – The strategy used to solve the OptCom formulation. Defaults to
“lagrangian” which gives a decent tradeoff between speed and
correctness.</li>
<li><strong>min_growth</strong> (<em>float</em><em> or </em><em>array-like</em>) – The minimal growth rate required for each individual. May be a
single value or an array-like object with the same length as there
are individuals.</li>
<li><strong>fluxes</strong> (<em>boolean</em>) – Whether to return the fluxes as well.</li>
<li><strong>pfba</strong> (<em>boolean</em>) – Whether to obtain fluxes by parsimonious FBA rather than
“classical” FBA.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The solution of the optimization. If fluxes==False will only
contain the objective value, community growth rate and individual
growth rates.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">micom.CommunitySolution</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">References</p>
<table class="docutils footnote" frame="void" id="id7" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[3]</td><td>OptCom: a multi-level optimization framework for the metabolic
modeling and analysis of microbial communities.
Zomorrodi AR, Maranas CD. PLoS Comput Biol. 2012 Feb;8(2):e1002363.
doi: 10.1371/journal.pcbi.1002363, PMID: 22319433</td></tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="micom.Community.optimize">
<code class="descname">optimize</code><span class="sig-paren">(</span><em>fluxes=False</em>, <em>pfba=True</em>, <em>raise_error=False</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.Community.optimize" title="Permalink to this definition">¶</a></dt>
<dd><p>Optimize the model using flux balance analysis.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>slim</strong> (<em>boolean</em><em>, </em><em>optional</em>) – Whether to return a slim solution which does not contain fluxes,
just growth rates.</li>
<li><strong>raise_error</strong> (<em>boolean</em><em>, </em><em>optional</em>) – Should an error be raised if the solution is not optimal. Defaults
to False which will either return a solution with a non-optimal
status or None if optimization fails.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The solution after optimization or None if there is no optimum.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">micom.CommunitySolution</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="micom.Community.optimize_all">
<code class="descname">optimize_all</code><span class="sig-paren">(</span><em>fluxes=False</em>, <em>progress=False</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.Community.optimize_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Return solutions for individually optimizing each model.</p>
<p class="rubric">Notes</p>
<p>This might well mean that growth rates for all other individuals are
low since the individual may use up all available resources. As a
consequence the reported growth rates may usually never be obtained
all at once.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>fluxes</strong> (<em>boolean</em><em>, </em><em>optional</em>) – Whether to return all fluxes. Defaults to just returning the
maximal growth rate.</li>
<li><strong>progress</strong> (<em>boolean</em><em>, </em><em>optional</em>) – Whether to show a progress bar.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The maximal growth rate for each species.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">pandas.Series</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="micom.Community.optimize_single">
<code class="descname">optimize_single</code><span class="sig-paren">(</span><em>id</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.Community.optimize_single" title="Permalink to this definition">¶</a></dt>
<dd><p>Optimize growth rate for one individual.</p>
<p><cite>optimize_single</cite> will calculate the maximal growth rate for one
individual member of the community.</p>
<p class="rubric">Notes</p>
<p>This might well mean that growth rates for all other individuals are
low since the individual may use up all available resources.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>id</strong> (<em>str</em>) – The ID of the individual to be optimized.</li>
<li><strong>fluxes</strong> (<em>boolean</em><em>, </em><em>optional</em>) – Whether to return all fluxes. Defaults to just returning the
maximal growth rate.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The maximal growth rate for the given species.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">float</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="micom.Community.set_abundance">
<code class="descname">set_abundance</code><span class="sig-paren">(</span><em>value</em>, <em>normalize=True</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.Community.set_abundance" title="Permalink to this definition">¶</a></dt>
<dd><p>Change abundances for one or more taxa.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>value</strong> (<em>array-like object</em>) – The new abundances. Must contain one value for each taxon. Can
be a named object like a pandas Series.</li>
<li><strong>normalize</strong> (<em>boolean</em><em>, </em><em>optional</em>) – Whether to normalize the abundances to a total of 1.0. Many things
in micom asssume that this is always the case. Only change this
if you know what you are doing :O</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="micom.Community.taxonomy">
<code class="descname">taxonomy</code><a class="headerlink" href="#micom.Community.taxonomy" title="Permalink to this definition">¶</a></dt>
<dd><p><em>pandas.DataFrame</em> – The taxonomy used within the model.</p>
<p>This attribute only returns a copy.</p>
</dd></dl>

<dl class="method">
<dt id="micom.Community.to_pickle">
<code class="descname">to_pickle</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.Community.to_pickle" title="Permalink to this definition">¶</a></dt>
<dd><p>Save a community in serialized form.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>filename</strong> (<em>str</em>) – Where to save the pickled community.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">Nothing</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="micom.load_pickle">
<code class="descclassname">micom.</code><code class="descname">load_pickle</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#micom.load_pickle" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a community model from a pickled version.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>filename</strong> (<em>str</em>) – The file the community is stored in.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The loaded community model.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#micom.Community" title="micom.Community">micom.Community</a></td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="micom.data.html" class="btn btn-neutral float-right" title="micom.data package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="workflows.html" class="btn btn-neutral" title="Workflows" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Christian Diener.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.9.0+2.gf897403.dirty',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>